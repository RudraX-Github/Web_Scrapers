<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Scraper Performance Report</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Professional font pairing -->
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&family=Fira+Code:wght@400;600&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        @keyframes fadeInSlideUp {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        @keyframes backgroundGradientShift {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }
         /* Removed steam keyframes */

        .animate-fadeInSlideUp {
            animation: fadeInSlideUp 0.7s cubic-bezier(0.23, 1, 0.32, 1) forwards; /* Smoother, faster ease */
            opacity: 0;
        }

        /* Delay helper classes */
        .delay-100 { animation-delay: 0.1s; } .delay-200 { animation-delay: 0.2s; }
        .delay-300 { animation-delay: 0.3s; } .delay-400 { animation-delay: 0.4s; }
        .delay-500 { animation-delay: 0.5s; } .delay-600 { animation-delay: 0.6s; }
        .delay-700 { animation-delay: 0.7s; } .delay-800 { animation-delay: 0.8s; }
        .delay-900 { animation-delay: 0.9s; } .delay-1000 { animation-delay: 1.0s; }
        .delay-1100 { animation-delay: 1.1s; } .delay-1200 { animation-delay: 1.2s; }


        body {
            font-family: 'Poppins', sans-serif;
            /* Dark, sophisticated gradient background */
            background: linear-gradient(-45deg, #0f172a, #1e293b, #111827, #0a0e14);
            background-size: 400% 400%;
            animation: backgroundGradientShift 25s ease infinite;
            color: #cbd5e1; /* Lighter gray text */
            overflow-x: hidden;
            perspective: 1000px; /* Enable 3D transforms for parallax */
             /* Add mouse-following aura back */
             background-image: radial-gradient(
                circle at var(--mouse-x, 50%) var(--mouse-y, 50%),
                rgba(59, 130, 246, 0.1), /* Subtle blue */
                transparent 50%
            ), linear-gradient(-45deg, #0f172a, #1e293b, #111827, #0a0e14); /* Keep gradient */
            background-attachment: fixed;
            transition: background-position 0.2s linear; /* Only transition position */
        }

        /* Parallax background element */
        body::before {
            content: "";
            position: fixed;
            top: 0; left: 0;
            width: 100%; height: 100%;
            /* More subtle dot pattern */
            background-image: radial-gradient(rgba(255, 255, 255, 0.05) 1px, transparent 1px);
            background-size: 20px 20px;
            transform: translateZ(-20px) scale(3); /* Increase parallax distance/scale */
            z-index: -2;
            opacity: 0.3; /* More subtle */
            animation: pan 120s linear infinite alternate; /* Slower, alternating pan */
        }
        @keyframes pan {
            0% { background-position: 0 0; }
            100% { background-position: 40px 40px; }
        }


        /* Enhanced Glassmorphism Card Style */
        .glass-card {
            background: rgba(30, 41, 59, 0.65); /* More transparent */
            backdrop-filter: blur(30px) saturate(120%); /* Increased blur */
            -webkit-backdrop-filter: blur(30px) saturate(120%);
            border: 1px solid rgba(255, 255, 255, 0.08); /* Even subtler border */
            border-radius: 1rem;
            box-shadow: 0 15px 40px rgba(0, 0, 0, 0.6), inset 0 1px 1px rgba(255, 255, 255, 0.06); /* Deeper shadow, refined inner */
             transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1); /* Slower, smoother transition */
        }
        .glass-card:hover {
             box-shadow: 0 20px 55px rgba(0, 0, 0, 0.7), inset 0 1px 1px rgba(255, 255, 255, 0.08);
             border-color: rgba(255, 255, 255, 0.15);
             /* Subtle color shift on hover */
             background: linear-gradient(135deg, rgba(37, 51, 74, 0.8) 0%, rgba(45, 62, 90, 0.75) 100%);
        }
        
        .font-mono { font-family: 'Fira Code', monospace; } 

        /* Horizontal Scroll Container */
        .region-container {
            display: flex; overflow-x: auto; padding: 2rem; gap: 2rem;
            scroll-behavior: smooth; scrollbar-width: none; -ms-overflow-style: none;
            background: rgba(15, 23, 42, 0.5); /* Darker container bg */
             border: 1px solid rgba(255, 255, 255, 0.06);
             border-radius: 1rem;
             margin-bottom: 4rem; 
        }

        .region-container::-webkit-scrollbar { height: 10px; }
        .region-container::-webkit-scrollbar-track { background: rgba(255, 255, 255, 0.03); border-radius: 5px; }
        .region-container::-webkit-scrollbar-thumb { background: rgba(255, 255, 255, 0.1); border-radius: 5px; border: 2px solid transparent; background-clip: content-box; }
        .region-container::-webkit-scrollbar-thumb:hover { background: rgba(255, 255, 255, 0.25); }

        /* Individual Region Card */
        .region-card {
            flex: 0 0 340px; 
            transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275); 
            position: relative; overflow: hidden;
            animation: fadeInSlideUp 0.7s cubic-bezier(0.165, 0.84, 0.44, 1) forwards;
            opacity: 0;
            border: 1px solid transparent; 
            transform-style: preserve-3d; /* Enable 3D tilt */
        }
        
        /* Colored glow effect on hover using pseudo-element */
        .region-card::after {
            content: '';
            position: absolute;
            inset: -80px; /* Large spread */
            background: radial-gradient(circle, rgba(59, 130, 246, 0.3) 0%, transparent 70%); /* Colored glow */
            border-radius: inherit;
            opacity: 0;
            transition: opacity 0.4s ease-out;
            z-index: -1;
            transform: translateZ(-50px); /* Push glow behind */
        }

        .region-card:hover {
            transform: translateY(-15px) scale(1.05) rotateX(var(--tilt-x, 0deg)) rotateY(var(--tilt-y, 0deg)); /* Increased lift */
            box-shadow: 0 30px 60px rgba(0, 0, 0, 0.7), inset 0 1px 1px rgba(255, 255, 255, 0.08); 
            border-color: rgba(255, 255, 255, 0.15); 
        }
         .region-card:hover::after { opacity: 1; } /* Show glow on hover */
        
        .region-card[data-region-id] { cursor: pointer; }

        /* Status Pills */
        .pill { display: inline-block; padding: 5px 14px; border-radius: 9999px; font-size: 0.7rem; font-weight: 600; text-transform: uppercase; letter-spacing: 0.5px; border: none; }
        .pill-green { background-color: rgba(16, 185, 129, 0.2); color: #34d399; } 
        .pill-red { background-color: rgba(239, 68, 68, 0.2); color: #f87171; } 
        .pill-yellow { background-color: rgba(245, 158, 11, 0.2); color: #fbbf24; } 

        .grabbing { cursor: grabbing; }
        
        .chart-container { position: relative; height: 125px; width: 125px; margin: 0.75rem auto 0 auto; } 

        /* Modal Styles */
        .modal-backdrop { position: fixed; inset: 0; background: rgba(15, 23, 42, 0.85); backdrop-filter: blur(18px) saturate(100%); -webkit-backdrop-filter: blur(18px) saturate(100%); z-index: 40; opacity: 0; transition: opacity 0.35s ease-out; }
        .modal-content { position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%) scale(0.9); z-index: 50; width: 90%; max-width: 720px; max-height: 90vh; overflow-y: auto; opacity: 0; transition: all 0.4s cubic-bezier(0.165, 0.84, 0.44, 1.2); border-radius: 1rem; } 
        .modal-container:not(.hidden) .modal-backdrop { opacity: 1; }
        .modal-container:not(.hidden) .modal-content { opacity: 1; transform: translate(-50%, -50%) scale(1); }
        
        .icon { display: inline-block; width: 1.2em; height: 1.2em; margin-right: 0.4em; vertical-align: -0.25em; } 
        
        /* Analysis list style */
        .analysis-list li { position: relative; padding-left: 1.5rem; }
        .analysis-list li::before {
             content: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="%2360a5fa" class="w-5 h-5"><path fill-rule="evenodd" d="M10 18a8 8 0 1 0 0-16 8 8 0 0 0 0 16Zm3.857-9.809a.75.75 0 0 0-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 1 0-1.06 1.061l2.5 2.5a.75.75 0 0 0 1.137-.089l4-5.5Z" clip-rule="evenodd" /></svg>'); 
             position: absolute; left: 0; top: 3px; width: 1em; height: 1em;
        } 
        .challenges-list li::before {
             content: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="%23fbbf24" class="w-5 h-5"><path fill-rule="evenodd" d="M18 10a8 8 0 1 1-16 0 8 8 0 0 1 16 0Zm-8-5a.75.75 0 0 1 .75.75v4.5a.75.75 0 0 1-1.5 0v-4.5A.75.75 0 0 1 10 5Zm0 10a1 1 0 1 0 0-2 1 1 0 0 0 0 2Z" clip-rule="evenodd" /></svg>'); 
        }
        
        /* Modal scrollbar */
        .modal-content::-webkit-scrollbar { width: 8px; }
        .modal-content::-webkit-scrollbar-track { background: rgba(255, 255, 255, 0.05); border-radius: 4px; }
        .modal-content::-webkit-scrollbar-thumb { background: rgba(255, 255, 255, 0.2); border-radius: 4px; }
        .modal-content::-webkit-scrollbar-thumb:hover { background: rgba(255, 255, 255, 0.4); }
        
    </style>
</head>
<body class="min-h-screen p-6 md:p-10 text-slate-300"> 
    <!-- Removed Particle div -->

    <main class="max-w-7xl mx-auto relative z-10"> 
        <header class="text-center mb-12 md:mb-16 animate-fadeInSlideUp">
            <h1 class="text-4xl sm:text-5xl lg:text-6xl font-bold text-white mb-4 flex items-center justify-center">
                 <svg class="icon w-10 h-10 md:w-12 md:h-12 inline-block text-blue-400" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 17v-2m3 2v-4m3 4v-6m2 10H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path></svg>
                 Scraper Performance Report
            </h1>
            <p class="text-base sm:text-lg md:text-xl text-slate-400"> 
                Final Analysis of the 12-Region Scraping Operation
            </p>
        </header>

        <section class="grid grid-cols-1 md:grid-cols-3 gap-6 md:gap-8 mb-12 md:mb-16">
            <div class="glass-card p-6 md:p-8 animate-fadeInSlideUp delay-100 text-center md:text-left">
                <h2 class="text-sm md:text-base font-semibold text-slate-400 uppercase tracking-wider mb-3 flex items-center justify-center md:justify-start">
                    <svg class="icon text-purple-400" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M3.75 12h16.5m-16.5 3.75h16.5M3.75 19.5h16.5M5.625 4.5h12.75a1.125 1.125 0 0 1 0 2.25H5.625a1.125 1.125 0 0 1 0-2.25Z" /></svg>
                    Total Rankings
                </h2>
                <p class="text-4xl sm:text-5xl md:text-6xl font-bold text-white mt-2 font-mono" id="total-rankings">0</p> 
                <p class="text-xs sm:text-sm md:text-base text-slate-400 mt-2">from 12 regions</p>
            </div>
             <div class="glass-card p-6 md:p-8 animate-fadeInSlideUp delay-200 text-center md:text-left">
                <h2 class="text-sm md:text-base font-semibold text-slate-400 uppercase tracking-wider mb-3 flex items-center justify-center md:justify-start">
                     <svg class="icon text-green-400" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="m9 12.75 2.25 2.25 4.5-4.5m4.5 2.25a7.5 7.5 0 0 1-14.994.004A7.5 7.5 0 0 1 21 12Z" /></svg>
                     Click Success Rate
                 </h2>
                 <p class="text-4xl sm:text-5xl md:text-6xl font-bold text-green-400 mt-2 font-mono" id="success-rate">0.0%</p>
                 <p class="text-xs sm:text-sm md:text-base text-slate-400 mt-2">(18,572 valid / 18,665 total)</p>
             </div>
             <div class="glass-card p-6 md:p-8 animate-fadeInSlideUp delay-300 text-center md:text-left">
                 <h2 class="text-sm md:text-base font-semibold text-slate-400 uppercase tracking-wider mb-3 flex items-center justify-center md:justify-start">
                     <svg class="icon text-blue-400" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M9 12.75 11.25 15 15 9.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z" /></svg>
                     Stable Runs
                 </h2>
                 <p class="text-4xl sm:text-5xl md:text-6xl font-bold text-blue-400 mt-2 font-mono" id="stability-metric">0 / 12</p>
                 <p class="text-xs sm:text-sm md:text-base text-slate-400 mt-2">Regions with 0 errors</p>
             </div>
        </section>

        <h2 class="text-xl sm:text-2xl md:text-3xl font-bold text-white mb-6 animate-fadeInSlideUp delay-400">
            Performance Dashboard by Region
        </h2>
        <div class="region-container glass-card animate-fadeInSlideUp delay-500" id="region-scroller">
            
             <!-- Cards with staggered delays -->
            <article class="region-card glass-card p-6 animate-fadeInSlideUp delay-100" data-region-id="london" title="Click for London details">
                 <h3 class="text-lg font-semibold text-white mb-2 text-center">London</h3>
                 <div class="text-center mb-3"><span class="pill pill-yellow">Recoverable Crashes</span></div>
                 <div class="chart-container"><canvas id="chart-london"></canvas></div>
                 <div class="flex justify-center flex-wrap gap-x-3 gap-y-1 mt-3 text-xs"> 
                     <span class="font-mono text-green-400">6,526 Ok</span>
                     <span class="font-mono text-red-400">20 Err</span>
                     <span class="font-mono text-yellow-400">18 Skip</span>
                 </div>
            </article>
            <article class="region-card glass-card p-6 animate-fadeInSlideUp delay-200" data-region-id="southeast" title="Click for South East details">
                 <h3 class="text-lg font-semibold text-white mb-2 text-center">South East</h3>
                 <div class="text-center mb-3"><span class="pill pill-yellow">Recoverable Crashes</span></div>
                 <div class="chart-container"><canvas id="chart-southeast"></canvas></div>
                 <div class="flex justify-center flex-wrap gap-x-3 gap-y-1 mt-3 text-xs">
                     <span class="font-mono text-green-400">204 Ok</span>
                     <span class="font-mono text-red-400">5 Err</span>
                     <span class="font-mono text-yellow-400">11 Skip</span>
                 </div>
            </article>
            <article class="region-card glass-card p-6 animate-fadeInSlideUp delay-300" data-region-id="northwest" title="Click for North West details">
                 <h3 class="text-lg font-semibold text-white mb-2 text-center">North West</h3>
                 <div class="text-center mb-3"><span class="pill pill-yellow">Recoverable Crashes</span></div>
                 <div class="chart-container"><canvas id="chart-northwest"></canvas></div>
                 <div class="flex justify-center flex-wrap gap-x-3 gap-y-1 mt-3 text-xs">
                     <span class="font-mono text-green-400">2,380 Ok</span>
                     <span class="font-mono text-red-400">2 Err</span>
                     <span class="font-mono text-yellow-400">13 Skip</span>
                 </div>
            </article>
            <article class="region-card glass-card p-6 animate-fadeInSlideUp delay-400" data-region-id="scotland" title="Click for Scotland details">
                 <h3 class="text-lg font-semibold text-white mb-2 text-center">Scotland</h3>
                 <div class="text-center mb-3"><span class="pill pill-green">Perfect (Stable)</span></div>
                 <div class="chart-container"><canvas id="chart-scotland"></canvas></div>
                 <div class="flex justify-center flex-wrap gap-x-3 gap-y-1 mt-3 text-xs">
                     <span class="font-mono text-green-400">368 Ok</span>
                     <span class="font-mono text-yellow-400">12 Skip</span>
                 </div>
            </article>
            <article class="region-card glass-card p-6 animate-fadeInSlideUp delay-500" data-region-id="southwest" title="Click for South West details">
                 <h3 class="text-lg font-semibold text-white mb-2 text-center">South West</h3>
                 <div class="text-center mb-3"><span class="pill pill-green">Perfect (Stable)</span></div>
                 <div class="chart-container"><canvas id="chart-southwest"></canvas></div>
                 <div class="flex justify-center flex-wrap gap-x-3 gap-y-1 mt-3 text-xs">
                     <span class="font-mono text-green-400">1,786 Ok</span>
                     <span class="font-mono text-yellow-400">5 Skip</span>
                 </div>
            </article>
            <article class="region-card glass-card p-6 animate-fadeInSlideUp delay-600" data-region-id="westmidlands" title="Click for West Midlands details">
                 <h3 class="text-lg font-semibold text-white mb-2 text-center">West Midlands</h3>
                 <div class="text-center mb-3"><span class="pill pill-green">Perfect (Stable)</span></div>
                 <div class="chart-container"><canvas id="chart-westmidlands"></canvas></div>
                 <div class="flex justify-center flex-wrap gap-x-3 gap-y-1 mt-3 text-xs">
                     <span class="font-mono text-green-400">1,893 Ok</span>
                     <span class="font-mono text-yellow-400">12 Skip</span>
                 </div>
            </article>
            <article class="region-card glass-card p-6 animate-fadeInSlideUp delay-700" data-region-id="yorkshire" title="Click for Yorkshire details">
                 <h3 class="text-lg font-semibold text-white mb-2 text-center">Yorkshire</h3>
                 <div class="text-center mb-3"><span class="pill pill-green">Perfect (Stable)</span></div>
                 <div class="chart-container"><canvas id="chart-yorkshire"></canvas></div>
                 <div class="flex justify-center flex-wrap gap-x-3 gap-y-1 mt-3 text-xs">
                     <span class="font-mono text-green-400">2,000 Ok</span>
                     <span class="font-mono text-yellow-400">11 Skip</span>
                 </div>
            </article>
            <article class="region-card glass-card p-6 animate-fadeInSlideUp delay-800" data-region-id="eastmidlands" title="Click for East Midlands details">
                 <h3 class="text-lg font-semibold text-white mb-2 text-center">East Midlands</h3>
                 <div class="text-center mb-3"><span class="pill pill-yellow">Recoverable Crashes</span></div>
                 <div class="chart-container"><canvas id="chart-eastmidlands"></canvas></div>
                 <div class="flex justify-center flex-wrap gap-x-3 gap-y-1 mt-3 text-xs">
                     <span class="font-mono text-green-400">806 Ok</span>
                     <span class="font-mono text-red-400">10 Err</span>
                     <span class="font-mono text-yellow-400">3 Skip</span>
                 </div>
            </article>
            <article class="region-card glass-card p-6 animate-fadeInSlideUp delay-900" data-region-id="north" title="Click for North details">
                 <h3 class="text-lg font-semibold text-white mb-2 text-center">North</h3>
                 <div class="text-center mb-3"><span class="pill pill-yellow">Recoverable Crashes</span></div>
                 <div class="chart-container"><canvas id="chart-north"></canvas></div>
                 <div class="flex justify-center flex-wrap gap-x-3 gap-y-1 mt-3 text-xs">
                     <span class="font-mono text-green-400">844 Ok</span>
                     <span class="font-mono text-red-400">2 Err</span>
                     <span class="font-mono text-yellow-400">2 Skip</span>
                 </div>
            </article>
            <article class="region-card glass-card p-6 animate-fadeInSlideUp delay-1000" data-region-id="eastanglia" title="Click for East Anglia details">
                 <h3 class="text-lg font-semibold text-white mb-2 text-center">East Anglia</h3>
                 <div class="text-center mb-3"><span class="pill pill-yellow">Recoverable Crashes</span></div>
                 <div class="chart-container"><canvas id="chart-eastanglia"></canvas></div>
                 <div class="flex justify-center flex-wrap gap-x-3 gap-y-1 mt-3 text-xs">
                     <span class="font-mono text-green-400">1,362 Ok</span>
                     <span class="font-mono text-red-400">10 Err</span>
                     <span class="font-mono text-yellow-400">18 Skip</span>
                 </div>
            </article>
            <article class="region-card glass-card p-6 animate-fadeInSlideUp delay-1100" data-region-id="wales" title="Click for Wales details">
                 <h3 class="text-lg font-semibold text-white mb-2 text-center">Wales</h3>
                 <div class="text-center mb-3"><span class="pill pill-green">Perfect (Stable)</span></div>
                 <div class="chart-container"><canvas id="chart-wales"></canvas></div>
                 <div class="flex justify-center flex-wrap gap-x-3 gap-y-1 mt-3 text-xs">
                     <span class="font-mono text-green-400">171 Ok</span>
                     <span class="font-mono text-yellow-400">2 Skip</span>
                 </div>
            </article>
            <article class="region-card glass-card p-6 animate-fadeInSlideUp delay-1200" data-region-id="northernireland" title="Click for Northern Ireland details">
                 <h3 class="text-lg font-semibold text-white mb-2 text-center">Northern Ireland</h3>
                 <div class="text-center mb-3"><span class="pill pill-yellow">Recoverable Crashes</span></div>
                 <div class="chart-container"><canvas id="chart-northernireland"></canvas></div>
                 <div class="flex justify-center flex-wrap gap-x-3 gap-y-1 mt-3 text-xs">
                     <span class="font-mono text-green-400">72 Ok</span>
                     <span class="font-mono text-red-400">2 Err</span>
                     <span class="font-mono text-yellow-400">2 Skip</span>
                 </div>
            </article>

        </div>
        
        <!-- Key Trends Analysis Section -->
        <section class="mt-12 md:mt-16 animate-fadeInSlideUp delay-600">
            <div class="glass-card p-8 md:p-10">
                 <h3 class="text-xl md:text-2xl font-bold text-blue-400 mb-6 flex items-center"> 
                      <svg class="icon w-7 h-7 md:w-8 md:h-8 mr-3" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
                           <path stroke-linecap="round" stroke-linejoin="round" d="M3.75 13.5l-3.75-3.75m3.75 3.75L0 13.5m3.75 0h16.5m-16.5 0L7.5 7.5m-3.75 6l3.75 3.75M7.5 7.5l-3.75 3.75M7.5 7.5l3.75 3.75m-3.75-3.75L11.25 15m3.75-3.75L11.25 15m3.75-3.75h1.5m-1.5 0-3.75 3.75M15 7.5l3.75 3.75m-3.75-3.75L18.75 15m3.75-3.75h-1.5m1.5 0-3.75 3.75M20.25 7.5l-3.75 3.75" />
                       </svg>
                      Key Trends & Insights
                 </h3>
                 <ul class="analysis-list list-none space-y-4 text-slate-300 pl-8 text-sm md:text-base"> 
                     <li>
                         <strong class="text-white">London Dominance:</strong> London generated ~35% (6,564) of all rankings, showing its major role in the UK legal scene on Legal500.
                     </li>
                     <li>
                         <strong class="text-white">Regional Stability Variation:</strong> 7 out of 12 regions ran perfectly stable. The 5 regions with recoverable issues were diverse, suggesting the minor click problem wasn't tied to one area's site design.
                     </li>
                     <li>
                         <strong class="text-white">High Data Integrity:</strong> Despite efficiency impacts, the script's resume logic ensured 100% data capture potential. The 99.5% click success rate is exceptionally high.
                     </li>
                     <li>
                          <strong class="text-white">Minimal Impact of Skips:</strong> Successful skips (93 total) were only ~0.5% of clicks, showing excellent link targeting accuracy.
                     </li>
                 </ul>
            </div>
        </section>

        <!-- Analysis Section -->
        <section class="mt-12 md:mt-16 grid grid-cols-1 md:grid-cols-2 gap-6 md:gap-8 mb-10">
            <div class="glass-card p-8 md:p-10 animate-fadeInSlideUp delay-700">
                <h3 class="text-xl md:text-2xl font-bold text-green-400 mb-6 flex items-center"> 
                     <svg class="icon w-7 h-7 md:w-8 md:h-8 mr-3" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
                         <path stroke-linecap="round" stroke-linejoin="round" d="M9 12.75 11.25 15 15 9.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z" />
                     </svg>
                     Key Successes of the Design
                </h3>
                <ul class="analysis-list list-none space-y-5 text-slate-300 pl-8 text-sm md:text-base">
                    <li><strong class="text-white">High Volume Extraction:</strong> Successfully retrieved **18,572** rankings. Adaptive batching proved effective.</li>
                    <li><strong class="text-white">Exceptional Stability:</strong> Automated restarts crucial for preventing memory issues and maintaining speed.</li>
                    <li><strong class="text-white">Flawless Recovery:</strong> Design ensured crashes were only temporary setbacks, guaranteeing complete data collection.</li>
                    <li><strong class="text-white">Proactive Error Avoidance:</strong> Successfully identified and skipped 42 non-firm links in stable runs.</li>
                </ul>
            </div>
            <div class="glass-card p-8 md:p-10 animate-fadeInSlideUp delay-700"> 
                <h3 class="text-xl md:text-2xl font-bold text-yellow-400 mb-6 flex items-center"> 
                     <svg class="icon w-7 h-7 md:w-8 md:h-8 mr-3" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
                         <path stroke-linecap="round" stroke-linejoin="round" d="M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126ZM12 15.75h.008v.008H12v-.008Z" />
                     </svg>
                     Challenges & Learnings
                </h3>
                <ul class="analysis-list challenges-list list-none space-y-5 text-slate-300 pl-8 text-sm md:text-base"> 
                    <li><strong class="text-white">Primary Hurdle:</strong> Intermittent `WebDriverException` crashes on invalid links due to website timing issues.</li>
                    <li><strong class="text-white">Efficiency Note:</strong> 51 crashes occurred across 5 regions, requiring minor re-scraping upon restart.</li>
                    <li><strong class="text-white">Root Cause Identified:</strong> The initial link selection was slightly too broad.</li>
                    <li><strong class="text-white">Future Enhancement:</strong> Stricter URL filtering (e.g., requiring `/firms/`) during link selection would likely prevent these issues.</li>
                </ul>
            </div>
        </section>

    </main>
    
    <!-- Modal HTML Structure -->
    <div id="region-modal" class="modal-container hidden fixed inset-0 z-30">
        <div id="modal-backdrop" class="modal-backdrop"></div>
        <div id="modal-content" class="modal-content glass-card p-8 md:p-10 text-slate-300"> 
            <div class="flex justify-between items-center mb-6">
                <h2 id="modal-title" class="text-2xl md:text-3xl font-bold text-white">Region Details</h2>
                <button id="modal-close-btn" class="text-slate-400 hover:text-white transition-colors p-2 rounded-full hover:bg-slate-700">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg>
                </button>
            </div>
            <div id="modal-body" class="grid grid-cols-1 md:grid-cols-2 gap-6 md:gap-8">
                <div class="space-y-6">
                    <h3 class="text-lg md:text-xl font-semibold text-slate-300 border-b border-slate-600 pb-3 mb-4">Run Statistics</h3> 
                    <div class="grid grid-cols-2 gap-x-6 gap-y-4">
                        <div>
                            <div class="text-xs md:text-sm text-slate-400 flex items-center">
                                <svg class="icon w-4 h-4 mr-1.5 text-purple-400" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"></path></svg>
                                Total Rankings
                            </div>
                            <div id="modal-rankings" class="text-2xl md:text-3xl font-mono font-bold text-white mt-1">0</div>
                        </div>
                        <div>
                            <div class="text-xs md:text-sm text-slate-400 flex items-center">
                                <svg class="icon w-4 h-4 mr-1.5 text-blue-400" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4M7.835 4.697a3.42 3.42 0 001.946-.806 3.42 3.42 0 014.438 0 3.42 3.42 0 001.946.806 3.42 3.42 0 013.135 3.135 3.42 3.42 0 00.806 1.946 3.42 3.42 0 010 4.438 3.42 3.42 0 00-.806 1.946 3.42 3.42 0 01-3.135 3.135 3.42 3.42 0 00-1.946.806 3.42 3.42 0 01-4.438 0 3.42 3.42 0 00-1.946-.806 3.42 3.42 0 01-3.135-3.135 3.42 3.42 0 00-.806-1.946 3.42 3.42 0 010-4.438 3.42 3.42 0 00.806-1.946 3.42 3.42 0 013.135-3.135z"></path></svg>
                                Status
                            </div>
                            <div id="modal-status" class="mt-1"></div>
                        </div>
                        <div>
                            <div class="text-xs md:text-sm text-slate-400 flex items-center">
                                <svg class="icon w-4 h-4 mr-1.5 text-red-400" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>
                                Recoverable Errors
                            </div>
                            <div id="modal-errors" class="text-2xl md:text-3xl font-mono font-bold text-red-400 mt-1">0</div>
                        </div>
                        <div>
                            <div class="text-xs md:text-sm text-slate-400 flex items-center">
                               <svg class="icon w-4 h-4 mr-1.5 text-yellow-400" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>
                                Successful Skips
                            </div>
                            <div id="modal-skips" class="text-2xl md:text-3xl font-mono font-bold text-yellow-400 mt-1">0</div>
                        </div>
                    </div>
                </div>
                <div class="space-y-6">
                    <h3 class="text-lg md:text-xl font-semibold text-slate-300 border-b border-slate-600 pb-3 mb-4">Data Sample (from .xlsx)</h3>
                    <div>
                        <h4 class="text-xs md:text-sm text-slate-400 mb-2 flex items-center">
                           <svg class="icon w-4 h-4 mr-1.5 text-slate-500" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"> <path stroke-linecap="round" stroke-linejoin="round" d="M3.75 21h16.5M4.5 3h15M5.25 3v18m13.5-18v18M9 6.75h6.375a.75.75 0 0 1 .75.75v3.75m0 0a.75.75 0 0 1-.75.75H12M9 12.75h3.75a.75.75 0 0 1 .75.75v3.75m0 0a.75.75 0 0 1-.75.75H12M9 18.75h6.375a.75.75 0 0 0 .75-.75V14.25m-7.5 4.5v-3.75a.75.75 0 0 1 .75-.75h3.75a.75.75 0 0 1 .75.75v3.75m-7.5-4.5h-.75a.75.75 0 0 0-.75.75v3.75c0 .414.336.75.75.75h.75m-7.5-4.5H5.25m0 0a.75.75 0 0 1 .75-.75h3.75a.75.75 0 0 1 .75.75v1.5m-1.5-.75-.75.75m-6-3 .75-.75m.75.75.75.75m6-3-.75.75M9 6.75l.75.75M9.75 6l.75-.75M14.25 6l.75-.75m-.75.75-.75.75m-6 3 .75-.75m.75.75.75.75m6-3-.75.75m-.75-.75.75-.75M9 12.75l.75.75m-.75-.75-.75.75m6 3 .75-.75m.75.75.75.75m6-3-.75.75m-.75-.75.75-.75M9 18.75l.75.75m-.75-.75-.75.75m6 3 .75-.75m.75.75.75.75m6-3-.75.75m-.75-.75.75-.75" /> </svg>
                           Top Firms by Rankings
                        </h4>
                        <ul id="modal-firms" class="list-disc list-outside pl-5 text-slate-300 text-xs md:text-sm space-y-1"></ul>
                    </div>
                    <div>
                        <h4 class="text-xs md:text-sm text-slate-400 mb-2 flex items-center">
                           <svg class="icon w-4 h-4 mr-1.5 text-slate-500" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"> <path stroke-linecap="round" stroke-linejoin="round" d="M12 6.042A8.967 8.967 0 0 0 6 3.75c-1.052 0-2.062.18-3 .512v14.25A8.987 8.987 0 0 1 6 18c2.305 0 4.408.867 6 2.292m0-14.25a8.966 8.966 0 0 1 6-2.292c1.052 0 2.062.18 3 .512v14.25A8.987 8.987 0 0 0 18 18a8.967 8.967 0 0 0-6 2.292m0-14.25v14.25" /> </svg>
                           Top Practice Areas
                        </h4>
                        <ul id="modal-practice-areas" class="list-disc list-outside pl-5 text-slate-300 text-xs md:text-sm space-y-1"></ul>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // --- Mouse Aura Effect --- 
        const body = document.body;
        let lastMove = 0;
        window.addEventListener('mousemove', (e) => {
             const now = performance.now();
             if (now - lastMove > 16) { 
                 requestAnimationFrame(() => {
                    body.style.setProperty('--mouse-x', e.clientX + 'px');
                    body.style.setProperty('--mouse-y', e.clientY + 'px');
                 });
                 lastMove = now;
             }
        });

        // --- 3D Tilt Effect & Draggable Scroll ---
         document.addEventListener('DOMContentLoaded', () => {
             const cards = document.querySelectorAll('.region-card');
             cards.forEach(card => {
                 card.addEventListener('mousemove', (e) => {
                     const rect = card.getBoundingClientRect();
                     const x = e.clientX - rect.left - rect.width / 2;
                     const y = e.clientY - rect.top - rect.height / 2;
                     const rotateY = (x / (rect.width / 2)) * 6; // Reduced max tilt
                     const rotateX = -(y / (rect.height / 2)) * 6; // Reduced max tilt
                     requestAnimationFrame(() => {
                         card.style.setProperty('--tilt-x', `${rotateX}deg`);
                         card.style.setProperty('--tilt-y', `${rotateY}deg`);
                         card.style.transform = `translateY(-12px) scale(1.04) rotateX(${rotateX}deg) rotateY(${rotateY}deg)`;
                     });
                 });
                 card.addEventListener('mouseleave', () => {
                     requestAnimationFrame(() => {
                         card.style.setProperty('--tilt-x', `0deg`);
                         card.style.setProperty('--tilt-y', `0deg`);
                         card.style.transform = `translateY(0px) scale(1)`; // Reset to base state smoothly
                     });
                 });
             });
             
            // Draggable Scroll
            const slider = document.getElementById('region-scroller');
            if (slider) { /* ... (draggable scroll code remains the same) ... */ 
                let isDown = false; let startX; let scrollLeft;
                slider.addEventListener('mousedown', (e) => { isDown = true; slider.classList.add('grabbing'); startX = e.pageX - slider.offsetLeft; scrollLeft = slider.scrollLeft; });
                slider.addEventListener('mouseleave', () => { isDown = false; slider.classList.remove('grabbing'); });
                slider.addEventListener('mouseup', () => { isDown = false; slider.classList.remove('grabbing'); });
                slider.addEventListener('mousemove', (e) => { if (!isDown) return; e.preventDefault(); const x = e.pageX - slider.offsetLeft; const walk = (x - startX) * 2.5; slider.scrollLeft = scrollLeft - walk; });
            }
             
             // --- Count-Up Animation ---
              const animateCountUp = (el, endVal, duration = 2000, isFloat = false) => {
                  if (!el) return; 
                 let startTime = null;
                 const step = (timestamp) => {
                     if (!startTime) startTime = timestamp;
                     const progress = Math.min((timestamp - startTime) / duration, 1);
                     const easedProgress = 1 - Math.pow(1 - progress, 4); // Ease out Quart
                     let currentVal = easedProgress * endVal;
                     
                     if (isFloat) {
                         el.textContent = currentVal.toFixed(1) + '%';
                     } else if (endVal === 7) { 
                         el.textContent = `${Math.floor(currentVal)} / 12`;
                     } else {
                         el.textContent = Math.floor(currentVal).toLocaleString();
                     }
                     
                     if (progress < 1) {
                         window.requestAnimationFrame(step);
                     } else {
                          if (isFloat) el.textContent = endVal.toFixed(1) + '%';
                          else if (endVal === 7) el.textContent = `7 / 12`; 
                          else el.textContent = endVal.toLocaleString();
                     }
                 };
                 window.requestAnimationFrame(step);
             };
 
             const correctTotalRankings = 18572; 
             animateCountUp(document.getElementById('total-rankings'), correctTotalRankings, 2500); 
             const correctSuccessRate = (correctTotalRankings / 18665) * 100;
             animateCountUp(document.getElementById('success-rate'), correctSuccessRate, 2500, true);
             animateCountUp(document.getElementById('stability-metric'), 7, 1800); 
 
             // --- Chart.js Config ---
             const chartConfig = {
                 london: { data: [6526, 20, 18], total: 6564 }, 
                 southeast: { data: [204, 5, 11], total: 220 }, 
                 northwest: { data: [2380, 2, 13], total: 2395 }, 
                 scotland: { data: [368, 0, 12], total: 380 }, 
                 southwest: { data: [1786, 0, 5], total: 1791 }, 
                 westmidlands: { data: [1893, 0, 12], total: 1905 }, 
                 yorkshire: { data: [2000, 0, 11], total: 2011 }, 
                 eastmidlands: { data: [806, 10, 3], total: 819 }, 
                 north: { data: [844, 2, 2], total: 848 }, 
                 eastanglia: { data: [1362, 10, 18], total: 1390 }, 
                 wales: { data: [171, 0, 2], total: 173 }, 
                 northernireland: { data: [72, 2, 2], total: 76 } 
             };
            
             // Helper function to create charts
             const createChart = (ctx, data) => {
                 new Chart(ctx, {
                     type: 'doughnut',
                     data: {
                         labels: ['Successful', 'Errors', 'Skips'], 
                         datasets: [{
                             label: 'Events',
                             data: data.data,
                              backgroundColor: [ 'rgba(52, 211, 153, 0.7)', 'rgba(248, 113, 113, 0.7)', 'rgba(251, 191, 36, 0.7)' ], 
                              borderColor: ['#10B981', '#F87171', '#FBBF24'], 
                              borderWidth: 1.5, 
                              hoverOffset: 10, 
                              hoverBackgroundColor: ['#10B981', '#F87171', '#FBBF24'],
                              hoverBorderColor: ['#059669', '#DC2626', '#D97706'] 
                         }]
                     },
                     options: { 
                         responsive: true, maintainAspectRatio: false, cutout: '70%', 
                         plugins: {
                             legend: { display: false },
                             tooltip: {
                                 enabled: true, 
                                 bodyFont: { family: 'Fira Code', size: 11 }, // Use Fira Code
                                 titleFont: { family: 'Poppins', size: 12, weight: '600' }, 
                                 backgroundColor: 'rgba(15, 23, 42, 0.9)', // Darker tooltip
                                 titleColor: '#e2e8f0', // Lighter title
                                 bodyColor: '#94a3b8', // Medium gray body
                                 borderColor: 'rgba(255, 255, 255, 0.1)', 
                                 borderWidth: 1, padding: 10, cornerRadius: 6 
                             }
                         }
                     }
                 });
             };
             
             // Create all 12 charts
             for (const [regionId, config] of Object.entries(chartConfig)) {
                 const ctx = document.getElementById(`chart-${regionId}`);
                 if (ctx) { createChart(ctx.getContext('2d'), config); }
             }
             
             // --- Modal Click Logic ---
             const modal = document.getElementById('region-modal');
             const modalBackdrop = document.getElementById('modal-backdrop');
             const modalCloseBtn = document.getElementById('modal-close-btn');
             const regionCardsQuery = document.querySelectorAll('.region-card[data-region-id]'); 
             
             const modalTitle = document.getElementById('modal-title');
             const modalRankings = document.getElementById('modal-rankings');
             const modalStatus = document.getElementById('modal-status');
             const modalErrors = document.getElementById('modal-errors');
             const modalSkips = document.getElementById('modal-skips');
             const modalFirms = document.getElementById('modal-firms');
             const modalPracticeAreas = document.getElementById('modal-practice-areas');
 
             // --- Modal Data for ALL regions ---
              const regionModalData = {
                  london: { title: "London Report", rankings: "6,564", status: '<span class="pill pill-yellow">Recoverable Crashes</span>', errors: "20", skips: "18", firms: [ "A&O Shearman (73)", "Clifford Chance (68)", "Latham & Watkins (65)", "Linklaters (65)", "Kirkland & Ellis (62)" ], practiceAreas: [ "Infrastructure: M&A", "Acquisition finance", "Corp restructuring & insolvency", "Emerging markets", "Derivatives" ] },
                  southeast: { title: "South East Report", rankings: "220", status: '<span class="pill pill-yellow">Recoverable Crashes</span>', errors: "5", skips: "11", firms: [ "Penningtons Manches Cooper (42)", "Shoosmiths LLP (39)", "Blake Morgan LLP (38)", "Moore Barlow LLP (35)", "Birketts LLP (33)" ], practiceAreas: [ "Commercial litigation: Beds, Bucks...", "Commercial property: Beds, Bucks...", "Corporate & commercial: Beds, Bucks...", "Employment: Beds, Bucks...", "Family: Beds, Bucks..." ] },
                  northwest: { title: "North West Report", rankings: "2,395", status: '<span class="pill pill-yellow">Recoverable Crashes</span>', errors: "2", skips: "13", firms: [ "Addleshaw Goddard (36)", "Pinsent Masons LLP (35)", "CMS (34)", "DWF (34)", "Eversheds Sutherland (34)" ], practiceAreas: [ "Corporate & commercial: Manchester", "Commercial litigation: Manchester", "Employment: Manchester", "Commercial property: Manchester", "Banking & finance: Manchester" ] },
                  scotland: { title: "Scotland Report", rankings: "380", status: '<span class="pill pill-green">Perfect (Stable)</span>', errors: "0", skips: "12", firms: [ "Brodies LLP (38)", "Burness Paull LLP (38)", "CMS (35)", "Shepherd and Wedderburn (33)", "Pinsent Masons LLP (31)" ], practiceAreas: [ "Corporate & commercial: Edinburgh...", "Commercial property: Edinburgh...", "Commercial litigation", "Employment", "Banking & finance" ] },
                  southwest: { title: "South West Report", rankings: "1,791", status: '<span class="pill pill-green">Perfect (Stable)</span>', errors: "0", skips: "5", firms: [ "Foot Anstey (39)", "TLT (39)", "Ashfords LLP (38)", "Clarke Willmott (38)", "Osborne Clarke (37)" ], practiceAreas: [ "Corporate & commercial: Elsewhere...", "Commercial litigation: Bristol", "Commercial property: Bristol", "Employment: Bristol", "Banking & finance" ] },
                  westmidlands: { title: "West Midlands Report", rankings: "1,905", status: '<span class="pill pill-green">Perfect (Stable)</span>', errors: "0", skips: "12", firms: [ "Eversheds Sutherland (33)", "Shoosmiths LLP (33)", "Browne Jacobson LLP (32)", "Gateley Legal (32)", "Pinsent Masons LLP (30)" ], practiceAreas: [ "Corporate & commercial: Birmingham", "Commercial litigation: Birmingham", "Commercial property: Birmingham", "Employment: Birmingham", "Banking & finance" ] },
                  yorkshire: { title: "Yorkshire Report", rankings: "2,011", status: '<span class="pill pill-green">Perfect (Stable)</span>', errors: "0", skips: "11", firms: [ "Eversheds Sutherland (36)", "Pinsent Masons LLP (35)", "Addleshaw Goddard (34)", "Squire Patton Boggs (34)", "Walker Morris LLP (34)" ], practiceAreas: [ "Corporate & commercial: Leeds...", "Commercial litigation: Leeds...", "Commercial property: Leeds...", "Employment: Leeds...", "Banking & finance" ] },
                  eastmidlands: { title: "East Midlands Report", rankings: "819", status: '<span class="pill pill-yellow">Recoverable Crashes</span>', errors: "10", skips: "3", firms: [ "Browne Jacobson LLP (33)", "Freeths LLP (32)", "Gateley Legal (28)", "Shoosmiths LLP (28)", "Howes Percival LLP (27)" ], practiceAreas: [ "Corporate & commercial: Nottingham...", "Commercial litigation: Nottingham...", "Commercial property: Nottingham...", "Employment: Nottingham...", "Insolvency & corporate recovery" ] },
                  north: { title: "North Report", rankings: "848", status: '<span class="pill pill-yellow">Recoverable Crashes</span>', errors: "2", skips: "2", firms: [ "Womble Bond Dickinson (UK) LLP (33)", "Ward Hadaway (31)", "Muckle LLP (29)", "Hay & Kilner LLP (25)", "Weightmans LLP (22)" ], practiceAreas: [ "Corporate & commercial", "Commercial litigation", "Commercial property", "Employment", "Banking & finance" ] },
                  eastanglia: { title: "East Anglia Report", rankings: "1,390", status: '<span class="pill pill-yellow">Recoverable Crashes</span>', errors: "10", skips: "18", firms: [ "Birketts LLP (45)", "Mills & Reeve LLP (40)", "Howes Percival LLP (29)", "Ashtons Legal (27)", "Hewitsons LLP (26)" ], practiceAreas: [ "Corporate & commercial: Norwich", "Corporate & commercial: Cambridge", "Commercial litigation: Norwich", "Commercial property: Norwich", "Employment: Norwich" ] },
                  wales: { title: "Wales Report", rankings: "173", status: '<span class="pill pill-green">Perfect (Stable)</span>', errors: "0", skips: "2", firms: [ "Hugh James (21)", "Blake Morgan LLP (19)", "Eversheds Sutherland (18)", "Acuity Law (15)", "Geldards LLP (15)" ], practiceAreas: [ "Commercial property", "Corporate & commercial", "Commercial litigation", "Employment", "Public sector" ] },
                  northernireland: { title: "Northern Ireland Report", rankings: "76", status: '<span class="pill pill-yellow">Recoverable Crashes</span>', errors: "2", skips: "2", firms: [ "Carson McDowell LLP (19)", "Tughans (17)", "A&L Goodbody Northern Ireland LLP (11)", "Mills Selig (10)", "Shoosmiths LLP (6)" ], practiceAreas: [ "Corporate and M&A", "Dispute resolution", "Commercial property", "Employment", "Banking & finance" ] }
             };
 
             regionCardsQuery.forEach(card => {
                 card.addEventListener('click', () => {
                     const regionId = card.dataset.regionId;
                     const data = regionModalData[regionId]; 
                     
                     if (data) {
                         modalTitle.textContent = data.title;
                         modalRankings.textContent = data.rankings;
                         modalStatus.innerHTML = data.status;
                         modalErrors.textContent = data.errors;
                         modalSkips.textContent = data.skips;
                         
                         const formatNum = (numStr) => numStr ? parseInt(numStr.match(/\((\d+)\)/)[1]).toLocaleString() : '?';
 
                         modalFirms.innerHTML = data.firms.map(f => `<li class="truncate">${f.replace(/\((\d+)\)/, `(${formatNum(f)})`)}</li>`).join(''); 
                         modalPracticeAreas.innerHTML = data.practiceAreas.map(p => `<li class="truncate">${p}</li>`).join('');
 
                         modal.classList.remove('hidden');
                     }
                 });
             });
 
             // Close modal logic
             const closeModal = () => { modal.classList.add('hidden'); };
             modalCloseBtn.addEventListener('click', closeModal);
             modalBackdrop.addEventListener('click', closeModal);
              window.addEventListener('keydown', (e) => {
                 if (e.key === 'Escape' && !modal.classList.contains('hidden')) { closeModal(); }
             });
         });
     </script>

</body>
</html>

